!function(o){var e={init:function(t){return o(this).find(".dropdown-menu li").click(function(t){t.stopPropagation()}),o(this).each(function(t){var e=o(this);e.addClass("dropdownCheckboxes"),e.data("default-label",e.find(".dropdown-toggle").html().trim()),e.append(o("<input/>",{type:"hidden",class:"hidden-input",name:e.data("name"),value:""})),e.find("input[type=checkbox]").click(function(){o(this).dropdownCheckboxes("eval")}),e.find("button.save").click(function(){o(this).dropdownCheckboxes("eval")}),e.find("button.clear").click(function(){o(this).closest(".dropdownCheckboxes").find("input[type=checkbox]").prop("checked",!1),o(this).dropdownCheckboxes("eval")}),e.find("button.selectall").click(function(){o(this).closest(".dropdownCheckboxes").find("input[type=checkbox]").prop("checked",!0),o(this).dropdownCheckboxes("eval")}),e.dropdownCheckboxes("eval")}),this},eval:function(){if(o(this).hasClass("dropdownCheckboxes"))var t=o(this);else t=o(this).closest(".dropdownCheckboxes");var e=[],n=[];return t.find("input[type=checkbox]:checked").each(function(t){e.push(o(this).closest("label").text().trim()),n.push(o(this).val())}),200<n.length?t.find(".dropdown-toggle").html(e.length+" selected"):0<n.length?t.find(".dropdown-toggle").html(e.join(", ")):t.find(".dropdown-toggle").html(t.data("default-label")),t.find("input.hidden-input").val(JSON.stringify(n)),(o(this).hasClass("save")||o(this).hasClass("close-dropdown"))&&o(this).closest(".dropdown-menu").prev().dropdown("toggle"),this},apply:function(){return this},cancel:function(){return this}};o.fn.dropdownCheckboxes=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void 0:e.init.apply(this,arguments)}}(jQuery);